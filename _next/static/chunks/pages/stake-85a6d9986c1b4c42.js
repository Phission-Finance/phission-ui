(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[797],{54997:function(n,t,e){(window.__NEXT_P=window.__NEXT_P||[]).push(["/stake",function(){return e(65608)}])},53722:function(n,t,e){"use strict";var a=e(47568),r=e(34051),s=e.n(r),o=e(85893),i=e(67294),c=e(35005),u=e(94506),l=e.n(u),d=e(99974),f=(e(35714),e(2593)),p=e(85827);t.Z=function(n){var t=n.tokenIn,e=n.tokenInAmount,r=n.spender,u=n.setApprovalNeeded,m=(0,p.yL)(),v=(0,p.mx)().data,x=(0,p.mA)(),h=x.address,b=(x.isConnecting,x.isDisconnected,(0,i.useState)(!1)),_=b[0],k=b[1],j=(0,i.useState)({loading:!1,text:"Approve"}),N=j[0],g=j[1],w=(0,p.do)({addressOrName:t.address,contractInterface:t.abi,functionName:"allowance",args:[h,null===r||void 0===r?void 0:r.contract.address],watch:!0,onSuccess:function(n){console.log("Allowance Success",n)},onError:function(n){console.log("Allowance Error",n)}}).data;function Z(){return(Z=(0,a.Z)(s().mark((function n(){return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return g({loading:!0,text:"Approving..."}),n.next=3,(0,d.dE)(m,v,t,r.contract.address,e).then((function(n){g({loading:!1,text:"Approve"}),n&&(k(!1),u(!1))}));case 3:case"end":return n.stop()}}),n)})))).apply(this,arguments)}return(0,i.useEffect)((function(){r&&(r.needsApproval&&e?(console.log("Allowance",t.symbol,null===w||void 0===w?void 0:w.toString()),!(null===e||void 0===e?void 0:e.isZero())&&(null===e||void 0===e?void 0:e.gt(w||f.O$.from(0)))?(_||k(!0),u(!0)):_&&k(!1)):_&&k(!1))})),(0,o.jsx)("div",{children:(0,o.jsx)(c.Z,{variant:"primary",disabled:N.loading,hidden:!_,onClick:N.loading?null:function(){return Z.apply(this,arguments)},className:l().button,children:N.text})})}},35238:function(n,t,e){"use strict";e.d(t,{Z:function(){return u}});var a=e(85893),r=e(67294),s=e(96261),o=e.n(s),i=e(85827),c=e(99974);function u(n){var t=n.label,e=n.token,s=n.setParentBalance,u=(0,i.mA)(),l=u.address,d=(u.isConnecting,u.isDisconnected,(0,i.KQ)({addressOrName:l,token:"ETH"!==e.symbol?e.address:"",watch:!0})),f=d.data,p=d.isError,m=d.isLoading;return(0,r.useEffect)((function(){s&&s(f)}),[f]),(0,a.jsxs)("div",{className:o().container,children:[(0,a.jsx)("h4",{children:p}),(0,a.jsx)("h4",{children:m}),(0,a.jsx)("h4",{children:(0,c.RV)(null===f||void 0===f?void 0:f.formatted)}),(0,a.jsxs)("label",{className:o().label,children:["Balance ",t]})]})}},89501:function(n,t,e){"use strict";e.d(t,{Z:function(){return o}});var a=e(85893),r=e(5261),s=e.n(r);e(67294);function o(n){var t=n.label,e=n.value,r=n.onChangeInput,o=n.unit,i=n.small;return(0,a.jsxs)("div",{className:s().container,children:[t?(0,a.jsx)("label",{children:t}):(0,a.jsx)(a.Fragment,{}),(0,a.jsx)("input",{className:i?s().smallInput:s().normalInput,type:"number",value:e,onChange:function(n){return r(n.target.value)}}),o?(0,a.jsx)("span",{className:s().unit,children:o}):""]})}},86502:function(n,t,e){"use strict";var a=e(85893),r=e(67294),s=e(35005),o=e(71514),i=e.n(o);t.Z=function(n){var t=n.text,e=n.action,o=n.disabled,c=n.width,u=(0,r.useState)(!1),l=u[0],d=u[1];return(0,r.useEffect)((function(){l&&e().then((function(){d(!1)})).catch((function(n){console.error(n),d(!1)}))}),[l]),(0,a.jsx)(s.Z,{variant:"primary",disabled:l||o,onClick:l?null:function(){return d(!0)},className:i().button,width:c||"200px",children:l?"Loading\u2026":t})}},62881:function(n,t,e){"use strict";e.d(t,{Z:function(){return u}});var a=e(85893),r=e(39325),s=e.n(r),o=e(99974),i=e(61744),c=e(67294);function u(n){var t=n.label,e=n.value,r=n.token,u=n.symbol,l=n.updater,d=(0,c.useState)(!0),f=d[0],p=d[1];return(0,c.useEffect)((function(){p("$"===u)}),[u]),(0,c.useEffect)((function(){if(l){var n=setInterval((function(){l()}),2e3);return function(){clearInterval(n)}}})),(0,a.jsxs)("div",{className:s().container,children:[(0,a.jsxs)("h4",{children:[f&&u?u+"":"",r&&e?(0,o.RV)(i.formatUnits(e,r.decimals)):e,!f&&u?""+u:""]}),(0,a.jsx)("label",{className:s().label,children:t})]})}},65608:function(n,t,e){"use strict";e.r(t),e.d(t,{default:function(){return S}});var a=e(85893),r=e(80697),s=e.n(r),o=e(35714),i=e(47568),c=e(34051),u=e.n(c),l=e(78356),d=e.n(l),f=e(86502),p=e(89501),m=e(67294),v=e(61744),x=e(2593),h=e(53722),b=e(62881),_=e(35238),k=e(12860),j=e(85827),N=e(99974);var g=function(n){var t=n.tab,e=n.farm,r=function(){e.aprFunc().then((function(n){E!==n&&I(n)}))},s=function(n){console.log("handleChangeInput",n,e.token.symbol);var t=v.parseUnits(n||"0",e.token.decimals);y(n),w(t)},o=(0,j.yL)(),c=(0,j.mx)().data,l=(0,m.useState)(x.O$.from(0)),g=l[0],w=l[1],Z=(0,m.useState)("0"),S=Z[0],y=Z[1],C=(0,m.useState)(0),E=C[0],I=C[1],A=(0,m.useState)(x.O$.from(0)),O=A[0],B=A[1],F=(0,m.useState)({text:"Stake",disabled:!1,action:H}),P=F[0],R=(F[1],(0,m.useState)({text:"Unstake",disabled:!1,action:M})),T=R[0],U=(R[1],(0,m.useState)({text:"Claim",disabled:!1,action:X})),$=U[0],G=(U[1],(0,m.useState)(!1)),L=(G[0],G[1]),D=(0,j.mA)(),Q=D.address,q=(D.isConnecting,D.isDisconnected,(0,j.do)({addressOrName:e.contract.address,contractInterface:JSON.parse(e.contract.abi),functionName:"balanceOf",args:Q,watch:!0}).data),z=(0,j.do)({addressOrName:e.contract.address,contractInterface:JSON.parse(e.contract.abi),functionName:"earned",args:Q,watch:!0}).data;function H(){return J.apply(this,arguments)}function J(){return(J=(0,i.Z)(u().mark((function n(){return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return console.log("stake",g),n.next=3,e.stakeFunc(c,g);case 3:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function M(){return V.apply(this,arguments)}function V(){return(V=(0,i.Z)(u().mark((function n(){return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.unStakeFunc(c,g);case 2:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function X(){return K.apply(this,arguments)}function K(){return(K=(0,i.Z)(u().mark((function n(){return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.claimFunc(c);case 2:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function W(n){return Y.apply(this,arguments)}function Y(){return(Y=(0,i.Z)(u().mark((function n(t){return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:window.open(t,"_blank","noopener,noreferrer");case 1:case"end":return n.stop()}}),n)})))).apply(this,arguments)}return(0,m.useEffect)((function(){e.contract&&r()}),[g,e]),k.Z.init||k.Z.initialize(o).then((function(){r()})),(0,a.jsxs)("div",{className:d().farm,children:[(0,a.jsxs)("div",{className:d().inputContainer,children:[(0,a.jsx)("label",{className:d().farmName,children:e.token.symbol}),(0,a.jsxs)("div",{className:d().input,children:[(0,a.jsx)(p.Z,{onChangeInput:s,value:S}),"Stake"===t?(0,a.jsx)("button",{onClick:function(){s(null===O||void 0===O?void 0:O.formatted)},children:"Set Max"}):(0,a.jsx)("button",{onClick:function(){s((0,N.RV)(v.formatUnits(null===q||void 0===q?void 0:q.toString(),e.token.decimals)))},children:"Set Max"})]})]}),(0,a.jsxs)("div",{className:d().stats,children:[(0,a.jsx)(b.Z,{label:"Staked",value:q||x.O$.from(0),token:e.token}),(0,a.jsx)(b.Z,{label:"Rewards",value:z,token:e.token,updater:void 0}),(0,a.jsx)(_.Z,{label:e.token.symbol,token:e.token,setParentBalance:B}),(0,a.jsx)(b.Z,{label:"APR",value:(null===E||void 0===E?void 0:E.toFixed(1).toString())+"%",updater:void 0})]}),(0,a.jsxs)("div",{className:d().buttonContainer,children:[(0,a.jsx)(f.Z,{text:"Deposit To Uniswap",action:(0,i.Z)(u().mark((function n(){return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,W("https://app.uniswap.org/#/add/v2/".concat(e.poolTokenA.address,"/").concat(e.poolTokenB.address));case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}),n)}))),disabled:!1}),"Stake"===t?(0,a.jsxs)("div",{children:[(0,a.jsx)(h.Z,{tokenIn:e.token,spender:e,tokenInAmount:g,setApprovalNeeded:L}),(0,a.jsx)(f.Z,{text:P.text,action:H,disabled:P.disabled})]}):(0,a.jsx)("div",{children:(0,a.jsx)(f.Z,{text:T.text,action:M,disabled:T.disabled})}),(0,a.jsx)(f.Z,{text:$.text,action:X,disabled:$.disabled})]})]})},w=e(2086),Z=e(28984),S=function(){var n=(0,m.useState)("Stake"),t=n[0],e=n[1];return(0,a.jsx)("div",{className:s().container,children:(0,a.jsxs)("main",{className:s().main,children:[(0,a.jsx)("div",{className:s().buttonGroup,children:(0,a.jsx)(w.Z,{children:[{name:"Stake",value:"Stake"},{name:"Unstake",value:"Unstake"}].map((function(n,r){return(0,a.jsx)(Z.Z,{id:"radio-".concat(r),type:"radio",variant:"outline-primary",name:"radio",value:n.value,checked:t===n.value,onChange:function(n){return e(n.currentTarget.value)},children:n.name},r)}))})}),o.Hu.map((function(n,e){return(0,a.jsx)(g,{tab:t,farm:n},e)}))]})})}},94506:function(n){n.exports={button:"approvalButton_button__LESyp"}},96261:function(n){n.exports={container:"balance_container__7C_Xe",label:"balance_label__PEcbt"}},78356:function(n){n.exports={main:"farm_main__6yUTr",farm:"farm_farm__vQ6GH",stats:"farm_stats__5uFts",inputContainer:"farm_inputContainer__qZEga",input:"farm_input__D63Wm",buttonContainer:"farm_buttonContainer__m_5zh"}},5261:function(n){n.exports={container:"input_container__OnbqA",smallInput:"input_smallInput__NRpk0",unit:"input_unit__j4f1e",normalInput:"input_normalInput__1PqBl"}},71514:function(n){n.exports={button:"loadingButton_button__f0GQ_"}},39325:function(n){n.exports={container:"value_container__awOM2",label:"value_label__BIgGE"}},80697:function(n){n.exports={main:"farm_main__Y0L7Q",buttonGroup:"farm_buttonGroup__ZJOFa"}},2086:function(n,t,e){"use strict";var a=e(94184),r=e.n(a),s=e(67294),o=e(76792),i=e(85893);const c=s.forwardRef((({bsPrefix:n,size:t,vertical:e,className:a,as:s="div",...c},u)=>{const l=(0,o.vE)(n,"btn-group");let d=l;return e&&(d=`${l}-vertical`),(0,i.jsx)(s,{...c,ref:u,className:r()(a,d,t&&`${l}-${t}`)})}));c.displayName="ButtonGroup",c.defaultProps={vertical:!1,role:"group"},t.Z=c},28984:function(n,t,e){"use strict";var a=e(94184),r=e.n(a),s=e(67294),o=e(76792),i=e(35005),c=e(85893);const u=()=>{},l=s.forwardRef((({bsPrefix:n,name:t,className:e,checked:a,type:s,onChange:l,value:d,disabled:f,id:p,inputRef:m,...v},x)=>(n=(0,o.vE)(n,"btn-check"),(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("input",{className:n,name:t,type:s,value:d,ref:m,autoComplete:"off",checked:!!a,disabled:!!f,onChange:l||u,id:p}),(0,c.jsx)(i.Z,{...v,ref:x,className:r()(e,f&&"disabled"),type:void 0,role:void 0,as:"label",htmlFor:p})]}))));l.displayName="ToggleButton",t.Z=l}},function(n){n.O(0,[357,0,774,888,179],(function(){return t=54997,n(n.s=t);var t}));var t=n.O();_N_E=t}]);
//# sourceMappingURL=stake-85a6d9986c1b4c42.js.map