(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[500],{20227:function(n,t,e){(window.__NEXT_P=window.__NEXT_P||[]).push(["/zap",function(){return e(47690)}])},53722:function(n,t,e){"use strict";var o=e(47568),a=e(34051),s=e.n(a),i=e(85893),r=e(67294),l=e(35005),u=e(94506),c=e.n(u),d=e(99974),p=(e(35714),e(2593)),f=e(85827);t.Z=function(n){var t=n.tokenIn,e=n.tokenInAmount,a=n.spender,u=n.setApprovalNeeded,m=(0,f.yL)(),v=(0,f.mx)().data,_=(0,f.mA)(),b=_.address,x=(_.isConnecting,_.isDisconnected,(0,r.useState)(!1)),h=x[0],g=x[1],w=(0,r.useState)({loading:!1,text:"Approve"}),S=w[0],j=w[1],y=(0,f.do)({addressOrName:t.address,contractInterface:t.abi,functionName:"allowance",args:[b,null===a||void 0===a?void 0:a.contract.address],watch:!0,onSuccess:function(n){console.log("Allowance Success",n)},onError:function(n){console.log("Allowance Error",n)}}).data;function I(){return(I=(0,o.Z)(s().mark((function n(){return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return j({loading:!0,text:"Approving..."}),n.next=3,(0,d.dE)(m,v,t,a.contract.address,e).then((function(n){j({loading:!1,text:"Approve"}),n&&(g(!1),u(!1))}));case 3:case"end":return n.stop()}}),n)})))).apply(this,arguments)}return(0,r.useEffect)((function(){a&&(a.needsApproval&&e?(console.log("Allowance",t.symbol,null===y||void 0===y?void 0:y.toString()),!(null===e||void 0===e?void 0:e.isZero())&&(null===e||void 0===e?void 0:e.gt(y||p.O$.from(0)))?(h||g(!0),u(!0)):h&&g(!1)):h&&g(!1))})),(0,i.jsx)("div",{children:(0,i.jsx)(l.Z,{variant:"primary",disabled:S.loading,hidden:!h,onClick:S.loading?null:function(){return I.apply(this,arguments)},className:c().button,children:S.text})})}},89501:function(n,t,e){"use strict";e.d(t,{Z:function(){return i}});var o=e(85893),a=e(5261),s=e.n(a);e(67294);function i(n){var t=n.label,e=n.value,a=n.onChangeInput,i=n.unit,r=n.small;return(0,o.jsxs)("div",{className:s().container,children:[t?(0,o.jsx)("label",{children:t}):(0,o.jsx)(o.Fragment,{}),(0,o.jsx)("input",{className:r?s().smallInput:s().normalInput,type:"number",value:e,onChange:function(n){return a(n.target.value)}}),i?(0,o.jsx)("span",{className:s().unit,children:i}):""]})}},86502:function(n,t,e){"use strict";var o=e(85893),a=e(67294),s=e(35005),i=e(71514),r=e.n(i);t.Z=function(n){var t=n.text,e=n.action,i=n.disabled,l=n.width,u=(0,a.useState)(!1),c=u[0],d=u[1];return(0,a.useEffect)((function(){c&&e().then((function(){d(!1)})).catch((function(n){console.error(n),d(!1)}))}),[c]),(0,o.jsx)(s.Z,{variant:"primary",disabled:c||i,onClick:c?null:function(){return d(!0)},className:r().button,width:l||"200px",children:c?"Loading\u2026":t})}},21957:function(n,t,e){"use strict";e.d(t,{Z:function(){return f}});var o=e(85893),a=e(85933),s=e(8102),i=e(5963),r=e.n(i),l=e(67294),u=e(61744),c=e(99974),d=e(35714),p=e(85827);function f(n){n.label;var t=n.values,e=n.token,i=n.onChangeInput,f=n.onChangeAsset,m=n.onChangeBalance,v=(0,l.useState)(""),_=v[0],b=v[1],x=(0,p.mA)(),h=x.address,g=(x.isConnecting,x.isDisconnected,(0,p.KQ)({addressOrName:h,token:"ETH"!==e.symbol?e.address:"",watch:!0})),w=g.data;g.isError,g.isLoading;return(0,l.useEffect)((function(){if(i){var n=setTimeout((function(){return i(_&&_>=0?_:"0")}),500);return function(){return clearTimeout(n)}}}),[_]),(0,l.useEffect)((function(){m&&m(null===w||void 0===w?void 0:w.value)}),[w]),(0,o.jsxs)("div",{className:r().container,children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("input",{min:0,value:_,className:r().swapInput,type:"number",onChange:function(n){return b(n.target.value)}}),(0,o.jsxs)("h4",{className:r().balance,children:["Bal: ",(0,c.RV)(null===w||void 0===w?void 0:w.formatted)]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)(s.Z,{className:r().dropdownButton,id:"dropdown-basic-button",title:e.symbol,onSelect:function(n){f(d.s_[n])},children:t.map((function(n,t){return(0,o.jsx)(a.Z.Item,{eventKey:n,children:n},t)}))}),(0,o.jsx)("button",{onClick:function(){if(e.symbol===d.BF.symbol){if((null===w||void 0===w?void 0:w.value)>5e16){var n=w.value-5e16;b(u.formatUnits(n.toString(),e.decimals))}}else b(w.formatted)},children:"Set Max"})]})]})}},47690:function(n,t,e){"use strict";e.r(t),e.d(t,{default:function(){return y}});var o=e(47568),a=e(34051),s=e.n(a),i=e(85893),r=e(214),l=e.n(r),u=e(21957),c=e(89501),d=e(85933),p=e(8102),f=e(5963),m=e.n(f),v=e(67294),_=e(99974),b=e(61744),x=e(35714),h=e(85827);function g(n){n.label;var t=n.value,e=n.token,o=n.values,a=n.onChangeAsset,s=(0,h.mA)(),r=s.address,l=(s.isConnecting,s.isDisconnected,(0,h.KQ)({addressOrName:r,token:"ETH"!==e.symbol?e.address:"",watch:!0})),u=l.data;l.isError,l.isLoading;return(0,i.jsxs)("div",{className:m().container,children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:m().value,children:(0,_.RV)(b.formatUnits(t.toString(),e.decimals))}),(0,i.jsxs)("h4",{className:m().balance,children:["Bal: ",(0,_.RV)(null===u||void 0===u?void 0:u.formatted)]})]}),(0,i.jsx)("div",{children:(0,i.jsx)(p.Z,{className:m().dropdownButton,id:"dropdown-basic-button",title:e.symbol,onSelect:function(n){a(x.s_[n])},children:o.map((function(n,t){return(0,i.jsx)(d.Z.Item,{eventKey:n,children:n},n)}))})})]})}var w=e(86502),S=e(53722),j=e(2593),y=function(){var n=function(n,t){console.log("handleSwapButtonState",n,F,G),t?n?F?"Error"!=K.text&&U({text:"Error",disabled:!0}):N.isZero()||G?K.disabled&&"Swap"==K.text||U({text:"Swap",disabled:!0}):(K.disabled||"Swap"!=K.text)&&U({text:"Swap",disabled:!1}):"Insufficient Balance"!=K.text&&U({text:"Insufficient Balance",disabled:!0}):U({text:"Invalid Zap",disabled:!0})},t=(0,h.mx)().data,e=(0,h.mA)(),a=e.address,r=(e.isConnecting,e.isDisconnected,(0,v.useState)(!1)),d=(r[0],r[1],(0,v.useState)(void 0)),p=d[0],f=d[1],m=(0,v.useState)(x.s_.ETH),_=m[0],y=m[1],I=(0,v.useState)(j.O$.from(0)),N=I[0],k=I[1],C=(0,v.useState)(j.O$.from(0)),E=C[0],Z=C[1],A=(0,v.useState)(x.s_.WETH),O=A[0],T=A[1],B=(0,v.useState)(j.O$.from(0)),H=B[0],L=B[1],$=(0,v.useState)("1"),D=$[0],z=$[1],Q=(0,v.useState)({text:"Swap",disabled:!0}),K=Q[0],U=Q[1],q=(0,v.useState)(!1),G=q[0],R=q[1],V=(0,v.useState)(!1),F=V[0],P=V[1];function W(){return(W=(0,o.Z)(s().mark((function n(){return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!p){n.next=3;break}return n.next=3,p.func(t,N,H.mul(j.O$.from(1e3-10*parseFloat(D))).div(j.O$.from(1e3)),a,!1);case 3:case"end":return n.stop()}}),n)})))).apply(this,arguments)}return(0,v.useEffect)((function(){N&&E&&(N.lte(E)?(p&&(N.isZero()||p.func(t,N,j.O$.from(0),a,!0).then((function(n){var t;console.log("Static Call",n),(t=x.fT[_.symbol][O.symbol].contract==x.z3?n[1]:x.fT[_.symbol][O.symbol].contract==x.pV?N:n).eq(H)||L(t),F&&P(!1)})).catch((function(n){console.log("Static Call Error",n),H.isZero()||L(j.O$.from(0)),F||P(!0)}))),n(!0,p)):n(!1,p))}),[N,E,p]),(0,v.useEffect)((function(){x.fT[_.symbol]&&x.fT[_.symbol][O.symbol]?f(x.fT[_.symbol][O.symbol]):f(void 0)}),[_,O]),(0,i.jsx)("div",{className:l().container,children:(0,i.jsxs)("main",{className:l().main,children:[(0,i.jsx)(u.Z,{label:"Asset In",values:Object.keys(x.s_).sort(),token:_,onChangeInput:function(n){console.log("Swap",n,_,O);var t=b.parseUnits(n,_.decimals);k(t)},onChangeAsset:y,onChangeBalance:Z}),(0,i.jsx)(g,{label:"Asset Out",values:Object.keys(x.s_).sort(),onChangeAsset:T,value:H,token:O}),(0,i.jsx)(c.Z,{label:"Slippage",value:D,onChangeInput:function(n){console.log("Set Slippage",n),z(n)},unit:"%",small:!0}),(0,i.jsx)(S.Z,{tokenIn:_,spender:p,tokenInAmount:N,setApprovalNeeded:R}),(0,i.jsx)(w.Z,{text:K.text,action:function(){return W.apply(this,arguments)},disabled:K.disabled,width:void 0})]})})}},94506:function(n){n.exports={button:"approvalButton_button__LESyp"}},5261:function(n){n.exports={container:"input_container__OnbqA",smallInput:"input_smallInput__NRpk0",unit:"input_unit__j4f1e",normalInput:"input_normalInput__1PqBl"}},71514:function(n){n.exports={button:"loadingButton_button__f0GQ_"}},5963:function(n){n.exports={container:"swapInput_container__y2UWD",swapInput:"swapInput_swapInput__cssZy",balance:"swapInput_balance__S3DUq",dropdownButton:"swapInput_dropdownButton__ZWzTk",value:"swapInput_value__zQtjN"}},214:function(n){n.exports={main:"Home_main__nLjiQ",footer:"Home_footer____T7K",title:"Home_title__T09hD",description:"Home_description__41Owk",grid:"Home_grid__GxQ85",card:"Home_card___LpL1",horizontalContainer:"Home_horizontalContainer__bpyg8",buttonGroup:"Home_buttonGroup__6xIkp"}}},function(n){n.O(0,[357,102,0,774,888,179],(function(){return t=20227,n(n.s=t);var t}));var t=n.O();_N_E=t}]);
//# sourceMappingURL=zap-d1ea0f5410223257.js.map